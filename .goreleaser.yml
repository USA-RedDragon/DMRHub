---
project_name: DMRHub

release:
  extra_files:
    - glob: ./LICENSE
  github:
    owner: USA-RedDragon
    name: DMRHub

builds:
  - main: .
    binary: DMRHub
    goos:
      - darwin
      - linux
      - windows
      - openbsd
      - netbsd
      - freebsd
    goarch:
      - "386"
      - amd64
      - arm
      - arm64
      - riscv64
    goarm:
      - "6"
      - "7"
    ignore:
      - goarch: "386"
        goos: darwin
      - goarch: arm64
        goos: windows
      - goarch: arm
        goos: windows
      - goarch: riscv
        goos: windows
      - goarch: riscv64
        goos: windows
      - goarch: arm
        goos: darwin
      - goarch: riscv64
        goos: darwin
      - goarch: riscv64
        goos: openbsd
      - goarch: riscv64
        goos: netbsd
    env:
      - CGO_ENABLED=0

signs:
  - cmd: cosign
    stdin: "{{ .Env.COSIGN_PASSWORD}}"
    args:
      [
        "sign-blob",
        "--key=/tmp/cosign.key",
        "--output=${signature}",
        "${artifact}",
      ]
    artifacts: all
